/* =====================================================
   Claude LangGraph - Warm Light Theme + Decorations
   ===================================================== */

*, *::before, *::after {
    margin: 0;
    padding: 0;
    box-sizing: border-box;
}

:root {
    --bg-base: #F6F5F3;
    --bg-surface: #FFFDF9;
    --bg-elevated: #FAF8F5;
    --bg-subtle: #F0EDE8;
    --bg-muted: #E5E1DA;

    --violet: #7C3AED;
    --violet-light: #A78BFA;
    --violet-bg: rgba(124, 58, 237, 0.08);
    --indigo: #6366F1;
    --blue: #3B82F6;
    --blue-bg: rgba(59, 130, 246, 0.08);
    --gradient: linear-gradient(135deg, #8B5CF6 0%, #6366F1 50%, #3B82F6 100%);

    --success: #059669;
    --success-bg: #ECFDF5;
    --warning: #D97706;
    --warning-bg: #FFFBEB;
    --error: #DC2626;
    --error-bg: #FEF2F2;

    --text-1: #1C1917;
    --text-2: #44403C;
    --text-3: #78716C;
    --text-4: #A8A29E;

    --border: #E7E5E4;
    --border-2: #D6D3D1;
    --border-3: #A8A29E;

    --shadow-sm: 0 1px 2px rgba(28, 25, 23, 0.04);
    --shadow-md: 0 4px 8px rgba(28, 25, 23, 0.06);
    --shadow-lg: 0 8px 24px rgba(28, 25, 23, 0.1);
    --shadow-card: 0 1px 3px rgba(28, 25, 23, 0.04), 0 4px 12px rgba(28, 25, 23, 0.04);

    --r-sm: 6px;
    --r-md: 10px;
    --r-lg: 14px;
    --r-xl: 20px;

    --ease: cubic-bezier(0.16, 1, 0.3, 1);
    --bounce: cubic-bezier(0.34, 1.56, 0.64, 1);
}

html { font-size: 14px; }

body {
    font-family: 'Inter', -apple-system, sans-serif;
    background: var(--bg-base);
    color: var(--text-1);
    min-height: 100vh;
    line-height: 1.5;
    -webkit-font-smoothing: antialiased;
}

/* ========== 装饰背景 ========== */
.decoration {
    position: fixed;
    pointer-events: none;
    z-index: 0;
}

/* 角落装饰圆 */
.deco-circle {
    position: fixed;
    border-radius: 50%;
    pointer-events: none;
}

.deco-circle-1 {
    width: 300px;
    height: 300px;
    top: -100px;
    right: -50px;
    background: radial-gradient(circle, rgba(124, 58, 237, 0.06) 0%, transparent 70%);
    animation: decoFloat 20s ease-in-out infinite;
}

.deco-circle-2 {
    width: 200px;
    height: 200px;
    bottom: 10%;
    left: -50px;
    background: radial-gradient(circle, rgba(59, 130, 246, 0.05) 0%, transparent 70%);
    animation: decoFloat 25s ease-in-out infinite reverse;
}

.deco-circle-3 {
    width: 150px;
    height: 150px;
    bottom: -50px;
    right: 20%;
    background: radial-gradient(circle, rgba(124, 58, 237, 0.04) 0%, transparent 70%);
    animation: decoFloat 18s ease-in-out infinite;
}

@keyframes decoFloat {
    0%, 100% { transform: translate(0, 0); }
    33% { transform: translate(20px, -15px); }
    66% { transform: translate(-15px, 20px); }
}

/* 点阵装饰 */
.deco-dots {
    position: fixed;
    top: 100px;
    right: 40px;
    width: 60px;
    height: 60px;
    background-image: radial-gradient(circle, var(--border-2) 1px, transparent 1px);
    background-size: 12px 12px;
    opacity: 0.6;
    animation: dotsPulse 4s ease-in-out infinite;
}

.deco-dots-2 {
    position: fixed;
    bottom: 120px;
    left: 40px;
    width: 40px;
    height: 40px;
    background-image: radial-gradient(circle, var(--violet-light) 1px, transparent 1px);
    background-size: 10px 10px;
    opacity: 0.3;
    animation: dotsPulse 5s ease-in-out infinite reverse;
}

@keyframes dotsPulse {
    0%, 100% { opacity: 0.6; }
    50% { opacity: 0.3; }
}

/* 线条装饰 */
.deco-line {
    position: fixed;
    width: 100px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--border-2), transparent);
    animation: lineGlow 3s ease-in-out infinite;
}

.deco-line-1 {
    top: 30%;
    left: 0;
    transform: rotate(-5deg);
}

.deco-line-2 {
    bottom: 25%;
    right: 0;
    transform: rotate(3deg);
}

@keyframes lineGlow {
    0%, 100% { opacity: 0.3; }
    50% { opacity: 0.6; }
}

/* 十字装饰 */
.deco-cross {
    position: fixed;
    width: 20px;
    height: 20px;
    opacity: 0.2;
}

.deco-cross::before,
.deco-cross::after {
    content: '';
    position: absolute;
    background: var(--violet-light);
}

.deco-cross::before {
    width: 100%;
    height: 1px;
    top: 50%;
    transform: translateY(-50%);
}

.deco-cross::after {
    width: 1px;
    height: 100%;
    left: 50%;
    transform: translateX(-50%);
}

.deco-cross-1 {
    top: 25%;
    left: 5%;
    animation: crossRotate 30s linear infinite;
}

.deco-cross-2 {
    bottom: 30%;
    right: 8%;
    animation: crossRotate 25s linear infinite reverse;
}

@keyframes crossRotate {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
}

/* ========== 导航 ========== */
.nav {
    position: sticky;
    top: 0;
    z-index: 100;
    display: flex;
    align-items: center;
    justify-content: space-between;
    height: 56px;
    padding: 0 24px;
    background: rgba(246, 245, 243, 0.85);
    backdrop-filter: blur(12px);
    border-bottom: 1px solid var(--border);
}

/* 导航装饰线 */
.nav::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 0;
    right: 0;
    height: 1px;
    background: linear-gradient(90deg, transparent 0%, var(--violet-light) 50%, transparent 100%);
    opacity: 0.3;
}

.nav-brand {
    display: flex;
    align-items: center;
    gap: 12px;
}

.nav-logo {
    position: relative;
    width: 32px;
    height: 32px;
    background: var(--gradient);
    border-radius: var(--r-md);
    display: flex;
    align-items: center;
    justify-content: center;
    box-shadow: 0 2px 8px rgba(124, 58, 237, 0.25);
}

/* Logo 装饰环 */
.nav-logo::before {
    content: '';
    position: absolute;
    inset: -3px;
    border: 1px dashed var(--violet-light);
    border-radius: calc(var(--r-md) + 3px);
    opacity: 0;
    animation: logoRing 3s ease-in-out infinite;
}

@keyframes logoRing {
    0%, 100% { opacity: 0; transform: scale(1) rotate(0deg); }
    50% { opacity: 0.5; transform: scale(1.1) rotate(180deg); }
}

.nav-logo svg {
    width: 18px;
    height: 18px;
    color: white;
}

.nav-title {
    font-size: 1rem;
    font-weight: 600;
    color: var(--text-1);
}

.nav-status {
    display: flex;
    align-items: center;
    gap: 8px;
}

.status-pill {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    padding: 6px 12px;
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: 100px;
    font-size: 0.75rem;
    font-weight: 500;
    color: var(--text-3);
    transition: all 0.2s var(--ease);
}

.status-pill .dot {
    width: 6px;
    height: 6px;
    border-radius: 50%;
    background: var(--text-4);
}

.status-pill.running {
    background: var(--warning-bg);
    border-color: #FED7AA;
    color: #92400E;
}
.status-pill.running .dot { animation: dotPulse 1.5s infinite; background: var(--warning); }

.status-pill.completed {
    background: var(--success-bg);
    border-color: #A7F3D0;
    color: #065F46;
}
.status-pill.completed .dot { background: var(--success); }

.status-pill.failed {
    background: var(--error-bg);
    border-color: #FECACA;
    color: #991B1B;
}
.status-pill.failed .dot { background: var(--error); }

@keyframes dotPulse {
    0%, 100% { opacity: 1; transform: scale(1); }
    50% { opacity: 0.5; transform: scale(1.3); }
}

/* ========== 布局 ========== */
.layout {
    position: relative;
    z-index: 1;
    display: grid;
    grid-template-columns: 280px 1fr 320px;
    gap: 20px;
    padding: 20px 24px 60px;
    max-width: 1600px;
    margin: 0 auto;
    min-height: calc(100vh - 56px);
    align-items: start;
}

/* ========== 卡片 ========== */
.card {
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: var(--r-lg);
    box-shadow: var(--shadow-card);
    overflow: hidden;
    transition: all 0.2s var(--ease);
    position: relative;
}

/* 卡片顶部装饰线 */
.card::before {
    content: '';
    position: absolute;
    top: 0;
    left: 20px;
    right: 20px;
    height: 1px;
    background: linear-gradient(90deg, transparent, var(--border), transparent);
}

.card:hover {
    box-shadow: var(--shadow-lg);
}

.card-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    padding: 14px 18px;
    border-bottom: 1px solid var(--border);
    position: relative;
}

/* 分隔线装饰 */
.card-header::after {
    content: '';
    position: absolute;
    bottom: -1px;
    left: 50%;
    transform: translateX(-50%);
    width: 40px;
    height: 2px;
    background: var(--gradient);
    border-radius: 1px;
    opacity: 0.5;
}

.card-title {
    display: flex;
    align-items: center;
    gap: 8px;
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--text-1);
}

.card-title svg {
    width: 16px;
    height: 16px;
    color: var(--violet);
}

.card-body { padding: 16px 18px; }

/* ========== 统计 ========== */
.stats-grid {
    display: grid;
    grid-template-columns: repeat(4, 1fr);
    gap: 16px;
    margin-bottom: 20px;
}

.stat-card {
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: var(--r-lg);
    padding: 20px;
    transition: all 0.25s var(--ease);
    position: relative;
    overflow: hidden;
}

/* 统计卡片角标装饰 */
.stat-card::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 40px;
    height: 40px;
    background: linear-gradient(135deg, transparent 50%, var(--bg-elevated) 50%);
    transition: all 0.3s;
}

.stat-card:hover {
    border-color: var(--border-2);
    transform: translateY(-3px);
    box-shadow: var(--shadow-lg);
}

.stat-card:hover::before {
    width: 50px;
    height: 50px;
}

.stat-icon {
    width: 44px;
    height: 44px;
    display: flex;
    align-items: center;
    justify-content: center;
    border-radius: var(--r-md);
    margin-bottom: 16px;
    position: relative;
}

/* 图标装饰环 */
.stat-icon::after {
    content: '';
    position: absolute;
    inset: -4px;
    border: 1px dashed currentColor;
    border-radius: calc(var(--r-md) + 4px);
    opacity: 0.2;
}

.stat-icon.violet { background: var(--violet-bg); color: var(--violet); }
.stat-icon.green { background: var(--success-bg); color: var(--success); }
.stat-icon.yellow { background: var(--warning-bg); color: var(--warning); }
.stat-icon.blue { background: var(--blue-bg); color: var(--blue); }

.stat-icon svg { width: 22px; height: 22px; }

.stat-value {
    font-size: 2rem;
    font-weight: 700;
    color: var(--text-1);
    line-height: 1;
    margin-bottom: 6px;
    font-variant-numeric: tabular-nums;
}

.stat-label {
    font-size: 0.75rem;
    color: var(--text-4);
    font-weight: 500;
}

/* ========== 侧边栏 ========== */
.sidebar { display: flex; flex-direction: column; gap: 16px; }
.sidebar > .card {
    display: flex;
    flex-direction: column;
    min-height: 400px;
    flex: 1;
}

.task-list {
    flex: 1;
    min-height: 300px;
    display: flex;
    flex-direction: column;
    gap: 8px;
    padding: 12px;
}

.task-list::-webkit-scrollbar { width: 5px; }
.task-list::-webkit-scrollbar-thumb { background: var(--bg-muted); border-radius: 3px; }

.task-item {
    padding: 14px;
    background: var(--bg-elevated);
    border: 1px solid transparent;
    border-radius: var(--r-md);
    cursor: pointer;
    transition: all 0.2s var(--ease);
    position: relative;
}

.task-item::before {
    content: '';
    position: absolute;
    left: 0;
    top: 50%;
    transform: translateY(-50%);
    width: 3px;
    height: 0;
    background: var(--gradient);
    border-radius: 2px;
    transition: height 0.2s var(--ease);
}

/* 任务项右下角装饰 */
.task-item::after {
    content: '';
    position: absolute;
    bottom: 8px;
    right: 12px;
    width: 6px;
    height: 6px;
    border: 1px solid var(--border-2);
    border-radius: 50%;
    opacity: 0;
    transition: opacity 0.2s;
}

.task-item:hover::after {
    opacity: 1;
}

.task-item:hover {
    background: var(--bg-surface);
    border-color: var(--border);
    box-shadow: var(--shadow-sm);
}

.task-item.active {
    background: var(--violet-bg);
    border-color: #DDD6FE;
}

.task-item.active::before { height: 60%; }

.task-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    margin-bottom: 6px;
}

.task-status {
    font-size: 0.625rem;
    font-weight: 600;
    padding: 3px 8px;
    border-radius: 100px;
    background: var(--bg-muted);
    color: var(--text-3);
    text-transform: uppercase;
    letter-spacing: 0.04em;
}

.task-status.running { background: var(--warning-bg); color: #92400E; }
.task-status.completed { background: var(--success-bg); color: #065F46; }
.task-status.failed { background: var(--error-bg); color: #991B1B; }

.task-meta {
    font-size: 0.625rem;
    color: var(--text-4);
    font-variant-numeric: tabular-nums;
}

.task-desc {
    font-size: 0.875rem;
    color: var(--text-2);
    line-height: 1.5;
    white-space: pre-wrap;
    overflow-wrap: anywhere;
    word-break: break-word;
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
}

.task-desc.markdown-inline {
    white-space: pre-wrap;
    overflow-wrap: anywhere;
    word-break: break-word;
}

.task-desc.markdown-inline :is(p, ul, ol, li, pre, table, blockquote, h1, h2, h3, h4, h5, h6) {
    display: inline;
    margin: 0;
    padding: 0;
}

.task-desc.markdown-inline code {
    font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'Consolas', monospace;
    font-size: 0.8em;
    background: var(--bg-subtle);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 1px 4px;
}

.task-item.active .task-desc {
    -webkit-line-clamp: unset;
    overflow: visible;
    display: block;
}

/* ========== 按钮 ========== */
.btn {
    display: inline-flex;
    align-items: center;
    justify-content: center;
    gap: 6px;
    padding: 8px 16px;
    font-size: 0.8125rem;
    font-weight: 500;
    border: none;
    border-radius: var(--r-md);
    cursor: pointer;
    transition: all 0.2s var(--ease);
    position: relative;
    overflow: hidden;
}

/* 按钮装饰 */
.btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
    transition: left 0.4s;
}

.btn:hover::before {
    left: 100%;
}

.btn svg { width: 14px; height: 14px; }

.btn-primary {
    background: var(--gradient);
    color: white;
    box-shadow: 0 2px 4px rgba(124, 58, 237, 0.2);
}

.btn-primary:hover:not(:disabled) {
    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
    transform: translateY(-1px);
}

.btn-primary:disabled { opacity: 0.5; cursor: not-allowed; }

.btn-ghost {
    background: var(--bg-surface);
    color: var(--text-2);
    border: 1px solid var(--border);
}

.btn-ghost:hover {
    background: var(--bg-elevated);
    color: var(--text-1);
    border-color: var(--border-2);
}

/* ========== 空状态 ========== */
.empty {
    flex: 1;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 200px;
    padding: 40px 20px;
    text-align: center;
    position: relative;
}

/* 空状态装饰 */
.empty::before {
    content: '';
    position: absolute;
    width: 80px;
    height: 80px;
    border: 1px dashed var(--border-2);
    border-radius: 50%;
    opacity: 0.5;
}

.empty-icon {
    width: 48px;
    height: 48px;
    margin-bottom: 16px;
    color: var(--bg-muted);
    position: relative;
    z-index: 1;
}

.empty-title {
    font-size: 0.9375rem;
    font-weight: 500;
    color: var(--text-2);
    margin-bottom: 4px;
    position: relative;
    z-index: 1;
}

.empty-desc {
    font-size: 0.8125rem;
    color: var(--text-4);
    position: relative;
    z-index: 1;
}

/* ========== Task Detail Card ========== */
.task-detail-card { flex-shrink: 0; }

.task-detail-body {
    padding: 14px 20px 16px;
}

.task-detail-desc {
    font-size: 0.9rem;
    color: var(--text-1);
    line-height: 1.75;
    white-space: pre-wrap;
    word-break: break-word;
    margin: 0 0 10px;
}

.task-detail-desc.markdown {
    white-space: normal;
}

.task-detail-desc.markdown > *:first-child {
    margin-top: 0;
}

.task-detail-desc.markdown > *:last-child {
    margin-bottom: 0;
}

.task-detail-desc.markdown h1,
.task-detail-desc.markdown h2,
.task-detail-desc.markdown h3,
.task-detail-desc.markdown h4,
.task-detail-desc.markdown h5,
.task-detail-desc.markdown h6 {
    margin: 12px 0 8px;
    line-height: 1.35;
    color: var(--text-1);
}

.task-detail-desc.markdown h1 { font-size: 1.1rem; }
.task-detail-desc.markdown h2 { font-size: 1.02rem; }
.task-detail-desc.markdown h3,
.task-detail-desc.markdown h4,
.task-detail-desc.markdown h5,
.task-detail-desc.markdown h6 { font-size: 0.95rem; }

.task-detail-desc.markdown p {
    margin: 0 0 8px;
}

.task-detail-desc.markdown ul,
.task-detail-desc.markdown ol {
    margin: 0 0 8px 18px;
    padding: 0;
}

.task-detail-desc.markdown li {
    margin: 3px 0;
}

.task-detail-desc.markdown code {
    font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'Consolas', monospace;
    font-size: 0.82em;
    background: var(--bg-subtle);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 1px 5px;
}

.task-detail-desc.markdown pre {
    margin: 8px 0;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--r-sm);
    padding: 10px 12px;
    overflow-x: auto;
}

.task-detail-desc.markdown pre code {
    background: transparent;
    border: 0;
    padding: 0;
}

.task-detail-desc.markdown blockquote {
    margin: 8px 0;
    padding: 4px 10px;
    border-left: 3px solid var(--violet-light);
    color: var(--text-3);
}

.task-detail-meta {
    display: flex;
    flex-wrap: wrap;
    gap: 8px;
    font-size: 0.72rem;
    color: var(--text-4);
}

.task-detail-error {
    color: #f87171;
    margin-left: 8px;
}

/* ========== Graph ========== */
.graph-card {
    flex: 1;
    min-height: 480px;
    display: flex;
    flex-direction: column;
}

.graph-card .card-header {
    gap: 10px;
}

.graph-toolbar {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    flex-wrap: wrap;
    justify-content: flex-end;
}

.graph-tool-btn {
    padding: 4px 10px;
    font-size: 0.72rem;
    line-height: 1.1;
    min-width: 34px;
}

.graph-zoom-label {
    font-size: 0.72rem;
    color: var(--text-3);
    font-variant-numeric: tabular-nums;
    min-width: 48px;
    text-align: right;
}

.graph-card .card-body {
    flex: 1;
    display: flex;
    align-items: stretch;
    justify-content: flex-start;
    background: linear-gradient(135deg, var(--violet-bg) 0%, var(--blue-bg) 100%);
    position: relative;
    padding: 12px;
    min-height: 620px;
    overflow: auto;
}

/* Graph 背景装饰 */
.graph-card .card-body::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image:
        radial-gradient(circle at 20% 30%, rgba(124, 58, 237, 0.07) 0%, transparent 35%),
        radial-gradient(circle at 80% 70%, rgba(59, 130, 246, 0.07) 0%, transparent 35%),
        radial-gradient(circle at 50% 50%, rgba(16, 185, 129, 0.03) 0%, transparent 50%);
    pointer-events: none;
}

/* ── Mermaid SVG 容器 ── */
.graph-card .card-body > div {
    width: max-content;
    min-width: 100%;
    max-height: none;
    overflow: visible;
    z-index: 1;
    position: relative;
    padding: 20px 16px;
    box-sizing: border-box;
    transform-origin: top left;
    transition: transform 0.16s var(--ease);
}
.graph-card .card-body > div::-webkit-scrollbar { width: 5px; height: 5px; }
.graph-card .card-body > div::-webkit-scrollbar-track { background: transparent; }
.graph-card .card-body > div::-webkit-scrollbar-thumb { background: #3f3f46; border-radius: 3px; }

/* SVG 本体 */
.graph-card .card-body svg {
    width: auto;
    min-width: 100%;
    height: auto;
    display: block;
    filter: drop-shadow(0 2px 12px rgba(0,0,0,0.4));
}

/* 边上标签 pill */
.graph-card .card-body .edgeLabel foreignObject { overflow: visible; }
.graph-card .card-body .edgeLabel .label {
    background: #1c1c22 !important;
    border: 1px solid #3f3f46 !important;
    border-radius: 6px !important;
    padding: 3px 8px !important;
    font-size: 12px !important;
    font-weight: 500 !important;
    color: #d4d4d8 !important;
    white-space: nowrap;
    font-family: "Inter", sans-serif !important;
}
/* Mermaid 节点文本优化 */
.graph-card .card-body .nodeLabel {
    font-size: 13px !important;
    font-weight: 500 !important;
    font-family: "Inter", sans-serif !important;
    letter-spacing: 0.3px;
}

.graph-card .card-body .node text {
    font-size: 13px !important;
    font-weight: 500 !important;
    font-family: "Inter", sans-serif !important;
}

/* 节点形状透明度修正（Mermaid dark 主题有时 fill:none 残影）*/
.graph-card .card-body .node rect,
.graph-card .card-body .node circle,
.graph-card .card-body .node ellipse,
.graph-card .card-body .node polygon,
.graph-card .card-body .node path {
    stroke-width: 1.5px;
}

.node-badge {
    display: inline-flex;
    align-items: center;
    gap: 8px;
    padding: 5px 14px;
    background: rgba(109, 40, 217, 0.18);
    border: 1px solid #7c3aed;
    border-radius: 100px;
    font-size: 0.75rem;
    font-weight: 600;
    color: #c4b5fd;
    text-transform: capitalize;
}

.node-badge .pulse {
    position: relative;
    width: 6px;
    height: 6px;
}

.node-badge .pulse::before {
    content: '';
    position: absolute;
    inset: 0;
    border-radius: 50%;
    background: currentColor;
    animation: dotPulse 1.2s infinite;
}

.graph-placeholder { text-align: center; padding: 20px; position: relative; z-index: 1; }

.graph-placeholder .nodes {
    display: flex;
    align-items: center;
    gap: 16px;
    margin-bottom: 24px;
}

.graph-placeholder .node {
    padding: 14px 24px;
    background: var(--bg-surface);
    border: 2px dashed var(--border-2);
    border-radius: var(--r-lg);
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--text-3);
    animation: nodeFloat 3s ease-in-out infinite;
    position: relative;
}

/* 节点连接线装饰 */
.graph-placeholder .node:not(:last-child)::after {
    content: '';
    position: absolute;
    right: -16px;
    top: 50%;
    width: 16px;
    height: 1px;
    background: var(--border-2);
    transform: translateY(-50%);
}

.graph-placeholder .node:nth-child(2) { animation-delay: 0.2s; }
.graph-placeholder .node:nth-child(3) { animation-delay: 0.4s; }

@keyframes nodeFloat {
    0%, 100% { transform: translateY(0); }
    50% { transform: translateY(-8px); }
}

.graph-placeholder h3 {
    font-size: 1.125rem;
    font-weight: 600;
    color: var(--text-2);
    margin-bottom: 8px;
}

.graph-placeholder p {
    font-size: 0.875rem;
    color: var(--text-4);
}

/* ========== 子任务 ========== */
.progress-badge {
    font-size: 0.75rem;
    padding: 4px 12px;
    background: var(--bg-elevated);
    border-radius: 100px;
    color: var(--text-3);
}

.progress-badge strong { color: var(--violet); }

.subtask-grid {
    display: grid;
    grid-template-columns: repeat(auto-fill, minmax(180px, 1fr));
    gap: 12px;
}

.subtask-item {
    display: flex;
    align-items: center;
    gap: 12px;
    padding: 14px;
    background: var(--bg-elevated);
    border: 1px solid transparent;
    border-radius: var(--r-md);
    cursor: pointer;
    transition: all 0.2s var(--ease);
    position: relative;
}

/* 子任务装饰角 */
.subtask-item::before {
    content: '';
    position: absolute;
    top: 0;
    right: 0;
    width: 20px;
    height: 20px;
    background: linear-gradient(135deg, transparent 50%, var(--bg-subtle) 50%);
    opacity: 0;
    transition: opacity 0.2s;
}

.subtask-item:hover::before {
    opacity: 1;
}

.subtask-item:hover {
    background: var(--bg-surface);
    border-color: var(--border);
    transform: translateY(-2px);
    box-shadow: var(--shadow-md);
}

.subtask-icon {
    width: 36px;
    height: 36px;
    display: flex;
    align-items: center;
    justify-content: center;
    background: var(--bg-surface);
    border-radius: var(--r-sm);
}

.subtask-icon svg { width: 18px; height: 18px; color: var(--text-4); }

.subtask-item.done .subtask-icon { background: var(--success-bg); }
.subtask-item.done .subtask-icon svg { color: var(--success); }
.subtask-item.running .subtask-icon { background: var(--warning-bg); }
.subtask-item.failed .subtask-icon { background: var(--error-bg); }
.subtask-item.failed .subtask-icon svg { color: var(--error); }

.subtask-edit-btn {
    flex-shrink: 0;
    display: flex;
    align-items: center;
    justify-content: center;
    width: 26px;
    height: 26px;
    border: 1px solid var(--border);
    border-radius: var(--r-sm);
    background: var(--bg-surface);
    color: var(--text-4);
    cursor: pointer;
    opacity: 0;
    transition: all 0.15s var(--ease);
}
.subtask-item:hover .subtask-edit-btn {
    opacity: 1;
}
.subtask-edit-btn:hover {
    background: var(--primary);
    border-color: var(--primary);
    color: #fff;
}

.subtask-info { flex: 1; min-width: 0; }
.subtask-info h4 {
    font-size: 0.875rem;
    font-weight: 500;
    color: var(--text-1);
    white-space: nowrap;
    overflow: hidden;
    text-overflow: ellipsis;
}

.subtask-info .agent {
    display: inline-block;
    font-size: 0.625rem;
    padding: 2px 8px;
    background: var(--violet-bg);
    color: var(--violet);
    border-radius: 4px;
    margin-top: 4px;
    text-transform: capitalize;
    font-weight: 500;
}

.subtask-info .agent-id {
    display: inline-block;
    font-size: 0.6rem;
    padding: 2px 6px;
    background: rgba(34,197,94,0.12);
    color: #22c55e;
    border-radius: 4px;
    margin-top: 4px;
    margin-left: 4px;
    font-family: 'Courier New', monospace;
    font-weight: 600;
    letter-spacing: 0.3px;
}

.spinner {
    width: 18px;
    height: 18px;
    border: 2px solid var(--border-2);
    border-top-color: var(--warning);
    border-radius: 50%;
    animation: spin 0.6s linear infinite;
}

@keyframes spin { to { transform: rotate(360deg); } }

/* ========== Terminal ========== */
.terminal-card {
    display: flex;
    flex-direction: column;
    margin-top: 24px;
    border-top: 3px solid transparent;
    border-image: var(--gradient) 1;
}

.terminal-card::before { display: none; }

.terminal-output {
    flex: 1;
    min-height: 320px;
    max-height: 440px;
    overflow-y: auto;
    background: #F8F8F8;
    border-radius: var(--r-sm);
    padding: 12px 14px;
    font-family: 'JetBrains Mono', 'Fira Code', 'Cascadia Code', 'Consolas', monospace;
    font-size: 0.775rem;
    line-height: 1.75;
    border: 1px solid rgba(0,0,0,0.08);
    margin: 0 16px 0;
}

.terminal-output::-webkit-scrollbar { width: 4px; }
.terminal-output::-webkit-scrollbar-track { background: transparent; }
.terminal-output::-webkit-scrollbar-thumb { background: #CCCCCC; border-radius: 2px; }

.term-line {
    display: flex;
    gap: 10px;
    padding: 1px 0;
    animation: termIn 0.1s ease;
}

@keyframes termIn {
    from { opacity: 0; transform: translateX(-4px); }
    to   { opacity: 1; transform: translateX(0); }
}

.term-ts {
    flex-shrink: 0;
    width: 64px;
    color: #AAAAAA;
    font-variant-numeric: tabular-nums;
    user-select: none;
}

.term-text {
    flex: 1;
    word-break: break-all;
    color: #444444;
}

/* Level colours */
.term-line.node    .term-text { color: #0284C7; }
.term-line.success .term-text { color: #16A34A; }
.term-line.error   .term-text { color: #DC2626; }
.term-line.warn    .term-text { color: #D97706; }
.term-line.input   .term-text { color: #111111; font-weight: 700; }
.term-line.start   .term-text { color: #7C3AED; font-weight: 600; }
.term-line.running .term-text { color: #2563EB; }
.term-line.info    .term-text { color: #AAAAAA; font-style: italic; }

/* Terminal input row */
.terminal-input-row {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 16px;
    border-top: 1px solid var(--border);
    background: #F0F0F0;
    border-radius: 0 0 var(--r-md) var(--r-md);
}

.term-prompt {
    color: #A78BFA;
    font-family: monospace;
    font-size: 0.8rem;
    font-weight: 700;
    flex-shrink: 0;
    user-select: none;
    white-space: nowrap;
}

.term-input {
    flex: 1;
    background: transparent;
    border: none;
    outline: none;
    color: #111111;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    font-size: 0.82rem;
    caret-color: #7C3AED;
}

.term-input::placeholder { color: #BBBBBB; }

.term-send {
    padding: 5px 10px;
    flex-shrink: 0;
}

/* ========== Chat with Monitor AI ========== */
.chat-card {
    display: flex;
    flex-direction: column;
    margin-bottom: 16px;
}

.chat-messages {
    flex: 1;
    min-height: 220px;
    max-height: 340px;
    overflow-y: auto;
    padding: 12px 14px;
    display: flex;
    flex-direction: column;
    gap: 10px;
}

.chat-messages::-webkit-scrollbar { width: 4px; }
.chat-messages::-webkit-scrollbar-track { background: transparent; }
.chat-messages::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

.chat-msg {
    display: flex;
    flex-direction: column;
    max-width: 88%;
    animation: msgIn 0.2s var(--ease);
}

.chat-msg.user {
    align-self: flex-end;
    align-items: flex-end;
}

.chat-msg.assistant {
    align-self: flex-start;
    align-items: flex-start;
}

.chat-bubble {
    padding: 8px 12px;
    border-radius: 14px;
    font-size: 0.85rem;
    line-height: 1.55;
    white-space: pre-wrap;
    word-break: break-word;
}

/* Markdown rendered content inside assistant bubbles */
.chat-bubble.markdown {
    white-space: normal;
    max-width: 100%;
}
.chat-bubble.markdown p { margin: 0 0 8px; }
.chat-bubble.markdown p:last-child { margin-bottom: 0; }
.chat-bubble.markdown h1,.chat-bubble.markdown h2,.chat-bubble.markdown h3,.chat-bubble.markdown h4 {
    font-weight: 600; margin: 12px 0 4px; color: var(--text-1); line-height: 1.3;
}
.chat-bubble.markdown h1 { font-size: 1.05rem; }
.chat-bubble.markdown h2 { font-size: 0.97rem; }
.chat-bubble.markdown h3,.chat-bubble.markdown h4 { font-size: 0.88rem; }
.chat-bubble.markdown ul,.chat-bubble.markdown ol {
    margin: 6px 0 8px 16px; padding: 0;
}
.chat-bubble.markdown li { margin: 2px 0; }
.chat-bubble.markdown strong { font-weight: 600; color: var(--text-1); }
.chat-bubble.markdown em { font-style: italic; }
.chat-bubble.markdown code {
    background: var(--bg-base);
    border: 1px solid var(--border);
    border-radius: 4px;
    padding: 1px 5px;
    font-family: 'JetBrains Mono', 'Fira Code', monospace;
    font-size: 0.78rem;
    color: #a78bfa;
}
.chat-bubble.markdown pre {
    background: var(--bg-base);
    border: 1px solid var(--border);
    border-radius: 6px;
    padding: 10px 12px;
    overflow-x: auto;
    margin: 8px 0;
}
.chat-bubble.markdown pre code {
    background: none; border: none; padding: 0;
    font-size: 0.78rem; color: var(--text-2);
}
.chat-bubble.markdown table {
    border-collapse: collapse; width: 100%; margin: 8px 0; font-size: 0.8rem;
}
.chat-bubble.markdown th,.chat-bubble.markdown td {
    border: 1px solid var(--border);
    padding: 5px 10px; text-align: left;
}
.chat-bubble.markdown th {
    background: var(--bg-base); font-weight: 600; color: var(--violet-light);
}
.chat-bubble.markdown tr:nth-child(even) td { background: rgba(139,92,246,0.04); }
.chat-bubble.markdown hr {
    border: none; border-top: 1px solid var(--border); margin: 10px 0;
}
.chat-bubble.markdown blockquote {
    border-left: 3px solid var(--violet);
    margin: 6px 0; padding: 4px 12px;
    color: var(--text-3); font-style: italic;
}

.chat-msg.user .chat-bubble {
    background: var(--violet);
    color: #fff;
    border-bottom-right-radius: 4px;
}

.chat-msg.assistant .chat-bubble {
    background: var(--bg-elevated);
    color: var(--text-1);
    border-bottom-left-radius: 4px;
    border: 1px solid var(--border);
}

.chat-time {
    font-size: 0.68rem;
    color: var(--text-4);
    margin-top: 3px;
    padding: 0 4px;
}

.chat-composer {
    display: flex;
    align-items: center;
    gap: 8px;
    padding: 10px 14px;
    border-top: 1px solid var(--border);
}

.chat-input {
    flex: 1;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--r-sm);
    padding: 7px 10px;
    font-size: 0.85rem;
    color: var(--text-1);
    outline: none;
    transition: border-color 0.15s;
}

.chat-input:focus { border-color: var(--violet); }
.chat-input::placeholder { color: var(--text-4); }
.chat-input:disabled { opacity: 0.5; cursor: not-allowed; }

/* ========== 讨论 ========== */
.discussion-list {
    flex: 1;
    padding: 16px;
    display: flex;
    flex-direction: column;
    gap: 12px;
    min-height: 300px;
}

.message {
    display: flex;
    gap: 12px;
    animation: msgIn 0.3s var(--ease);
    position: relative;
}

@keyframes msgIn {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
}

.message-avatar {
    width: 32px;
    height: 32px;
    background: var(--gradient);
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 0.75rem;
    font-weight: 600;
    color: white;
    flex-shrink: 0;
    position: relative;
}

/* 头像装饰 */
.message-avatar::after {
    content: '';
    position: absolute;
    inset: -2px;
    border: 1px solid var(--violet-light);
    border-radius: 50%;
    opacity: 0.3;
}

.message-body {
    flex: 1;
    background: var(--bg-elevated);
    padding: 12px 14px;
    border-radius: var(--r-md);
    border-left: 3px solid var(--border-2);
}

.message.query .message-body { border-left-color: var(--blue); }
.message.response .message-body { border-left-color: var(--success); }
.message.consensus .message-body { border-left-color: var(--warning); }
.message.conflict .message-body { border-left-color: var(--error); }

.message-header {
    display: flex;
    justify-content: space-between;
    margin-bottom: 4px;
}

.message-sender {
    font-size: 0.8125rem;
    font-weight: 600;
    color: var(--violet);
}

.message-time {
    font-size: 0.6875rem;
    color: var(--text-4);
}

.message-text {
    font-size: 0.875rem;
    color: var(--text-2);
    line-height: 1.5;
}

.composer {
    padding: 14px 16px;
    border-top: 1px solid var(--border);
    display: flex;
    flex-direction: column;
    gap: 10px;
    background: var(--bg-surface);
    position: relative;
}

/* 输入区装饰线 */
.composer::before {
    content: '';
    position: absolute;
    top: 0;
    left: 50%;
    transform: translateX(-50%);
    width: 60px;
    height: 2px;
    background: var(--gradient);
    border-radius: 1px;
    opacity: 0.3;
}

.composer-select {
    padding: 8px 12px;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--r-sm);
    font-size: 0.75rem;
    color: var(--text-1);
    cursor: pointer;
}

.composer-row { display: flex; gap: 10px; }

.composer-input {
    flex: 1;
    padding: 10px 14px;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--r-md);
    font-size: 0.875rem;
    color: var(--text-1);
    transition: all 0.2s;
}

.composer-input:focus {
    outline: none;
    border-color: var(--violet);
    box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
}

.composer-btn {
    width: 40px;
    height: 40px;
    background: var(--gradient);
    border: none;
    border-radius: var(--r-md);
    color: white;
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.2s var(--ease);
    position: relative;
    overflow: hidden;
}

.composer-btn::before {
    content: '';
    position: absolute;
    top: 0;
    left: -100%;
    width: 100%;
    height: 100%;
    background: linear-gradient(90deg, transparent, rgba(255,255,255,0.3), transparent);
    transition: left 0.4s;
}

.composer-btn:hover::before {
    left: 100%;
}

.composer-btn:hover {
    box-shadow: 0 4px 12px rgba(124, 58, 237, 0.3);
    transform: translateY(-1px);
}

/* ========== Discussion + Status Report ========== */
.discussion-header {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
}

.discussion-context-chips {
    display: inline-flex;
    align-items: center;
    gap: 6px;
    flex-wrap: wrap;
}

.status-report-card {
    min-height: auto !important;
}

.status-report-body {
    display: flex;
    flex-direction: column;
    gap: 12px;
}

.status-section {
    border-top: 1px solid var(--border);
    padding-top: 10px;
}

.status-section-title {
    font-size: 0.72rem;
    font-weight: 600;
    color: var(--text-3);
    margin-bottom: 8px;
    text-transform: uppercase;
    letter-spacing: 0.04em;
}

.status-section-head {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 8px;
}

.timeline-filter {
    min-width: 110px;
    padding: 3px 8px;
    border: 1px solid var(--border);
    border-radius: var(--r-sm);
    background: var(--bg-elevated);
    color: var(--text-2);
    font-size: 0.7rem;
    text-transform: none;
    letter-spacing: 0;
}

.status-kv-grid {
    display: grid;
    grid-template-columns: 1fr;
    gap: 6px;
}

.status-kv-item {
    display: flex;
    align-items: center;
    justify-content: space-between;
    gap: 10px;
    font-size: 0.78rem;
}

.status-kv-item .k {
    color: var(--text-4);
    flex-shrink: 0;
}

.status-kv-item .v {
    color: var(--text-1);
    text-align: right;
    word-break: break-word;
}

.status-chip {
    display: inline-flex;
    align-items: center;
    gap: 4px;
    padding: 2px 8px;
    border-radius: 999px;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    color: var(--text-2);
    font-size: 0.68rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.03em;
}

.status-chip.running,
.status-chip.start,
.status-chip.node {
    background: var(--blue-bg);
    border-color: #BFDBFE;
    color: #1D4ED8;
}

.status-chip.success,
.status-chip.done,
.status-chip.completed {
    background: var(--success-bg);
    border-color: #A7F3D0;
    color: #065F46;
}

.status-chip.error,
.status-chip.failed {
    background: var(--error-bg);
    border-color: #FECACA;
    color: #991B1B;
}

.status-chip.warn,
.status-chip.warning {
    background: var(--warning-bg);
    border-color: #FDE68A;
    color: #92400E;
}

.status-chip.idle,
.status-chip.info {
    background: var(--bg-elevated);
    border-color: var(--border);
    color: var(--text-3);
}

.status-chip.milestone {
    background: var(--bg-elevated);
    border-color: var(--border-2);
    color: var(--text-2);
}

.status-chip.progress {
    background: var(--blue-bg);
    border-color: #BFDBFE;
    color: #1D4ED8;
}

.status-chip.intervention {
    background: #f3e8ff;
    border-color: #d8b4fe;
    color: #7e22ce;
}

.status-chip.error.t-kind {
    background: var(--error-bg);
    border-color: #fecaca;
    color: #b91c1c;
}

.status-timeline {
    display: flex;
    flex-direction: column;
    gap: 8px;
    max-height: 320px;
    overflow-y: auto;
    padding-right: 4px;
}

.status-timeline::-webkit-scrollbar { width: 4px; }
.status-timeline::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

.status-timeline-item {
    display: grid;
    grid-template-columns: 64px auto 1fr;
    gap: 8px;
    align-items: start;
    padding: 8px 10px;
    border: 1px solid var(--border);
    border-radius: var(--r-sm);
    background: var(--bg-elevated);
}

.status-timeline-item .t-time {
    font-size: 0.72rem;
    color: var(--text-4);
    font-variant-numeric: tabular-nums;
    font-family: ui-monospace, SFMono-Regular, Menlo, Consolas, monospace;
    white-space: nowrap;
    line-height: 1.3;
    padding-top: 2px;
}

.status-timeline-item .t-kind {
    min-width: 82px;
    justify-content: center;
}

.status-timeline-item .t-main {
    display: flex;
    flex-direction: column;
    gap: 2px;
    min-width: 0;
}

.status-timeline-item .t-title {
    font-size: 0.79rem;
    color: var(--text-1);
    line-height: 1.35;
    word-break: break-word;
    overflow-wrap: anywhere;
}

.status-timeline-item .t-detail {
    font-size: 0.72rem;
    color: var(--text-3);
    line-height: 1.35;
    word-break: break-word;
    overflow-wrap: anywhere;
}

.status-timeline-empty {
    font-size: 0.75rem;
    color: var(--text-4);
    padding: 8px 4px;
}

.modal-backdrop {
    position: fixed;
    inset: 0;
    background: rgba(28, 25, 23, 0.4);
    backdrop-filter: blur(4px);
    display: flex;
    align-items: center;
    justify-content: center;
    z-index: 1000;
    animation: fadeIn 0.15s var(--ease);
}

@keyframes fadeIn { from { opacity: 0; } to { opacity: 1; } }

.modal {
    width: 100%;
    max-width: 440px;
    background: var(--bg-surface);
    border: 1px solid var(--border);
    border-radius: var(--r-xl);
    box-shadow: var(--shadow-lg);
    animation: modalIn 0.25s var(--bounce);
    position: relative;
    overflow: hidden;
}

/* 弹窗装饰 */
.modal::before {
    content: '';
    position: absolute;
    top: 0;
    left: 0;
    right: 0;
    height: 3px;
    background: var(--gradient);
}

@keyframes modalIn {
    from { opacity: 0; transform: translateY(20px) scale(0.95); }
    to { opacity: 1; transform: translateY(0) scale(1); }
}

.modal-header {
    display: flex;
    justify-content: space-between;
    align-items: center;
    padding: 24px;
    border-bottom: 1px solid var(--border);
}

.modal-title {
    display: flex;
    align-items: center;
    gap: 12px;
    font-size: 1.125rem;
    font-weight: 600;
}

.modal-title svg { width: 24px; height: 24px; color: var(--violet); }

.modal-close {
    width: 32px;
    height: 32px;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--r-sm);
    color: var(--text-3);
    cursor: pointer;
    display: flex;
    align-items: center;
    justify-content: center;
    transition: all 0.15s;
}

.modal-close:hover {
    background: var(--error-bg);
    border-color: #FECACA;
    color: var(--error);
}

.modal-body { padding: 24px; }

.field { margin-bottom: 20px; }
.field:last-child { margin-bottom: 0; }

.field label {
    display: block;
    font-size: 0.8125rem;
    font-weight: 500;
    color: var(--text-2);
    margin-bottom: 8px;
}

.field input,
.field textarea,
.field select {
    width: 100%;
    padding: 12px 14px;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--r-md);
    font-size: 0.9375rem;
    color: var(--text-1);
    font-family: inherit;
    transition: all 0.2s;
}

.field input:focus,
.field textarea:focus,
.field select:focus {
    outline: none;
    border-color: var(--violet);
    box-shadow: 0 0 0 3px rgba(124, 58, 237, 0.1);
}

.field textarea { resize: vertical; min-height: 100px; }
.field select { cursor: pointer; }

.field-hint {
    display: block;
    margin-top: 6px;
    font-size: 0.6875rem;
    color: var(--text-4);
}

.modal-footer {
    display: flex;
    justify-content: flex-end;
    gap: 12px;
    padding: 20px 24px;
    background: var(--bg-elevated);
    border-top: 1px solid var(--border);
    border-radius: 0 0 var(--r-xl) var(--r-xl);
}

/* ========== 响应式 ========== */
@media (max-width: 1200px) {
    .layout { grid-template-columns: 260px 1fr; }
    .sidebar-right { display: none; }
    .stats-grid { grid-template-columns: repeat(2, 1fr); }
    .deco-dots, .deco-dots-2, .deco-cross-1, .deco-cross-2 { display: none; }
}

@media (max-width: 900px) {
    .layout { grid-template-columns: 1fr; padding: 16px; }
    .deco-circle, .deco-line { display: none; }
}

/* ========== 入场动画 ========== */
.stat-card { animation: cardIn 0.5s var(--ease) backwards; }
.stat-card:nth-child(1) { animation-delay: 0.05s; }
.stat-card:nth-child(2) { animation-delay: 0.1s; }
.stat-card:nth-child(3) { animation-delay: 0.15s; }
.stat-card:nth-child(4) { animation-delay: 0.2s; }

@keyframes cardIn {
    from { opacity: 0; transform: translateY(16px); }
    to { opacity: 1; transform: translateY(0); }
}

.card { animation: cardIn 0.5s var(--ease) backwards; animation-delay: 0.1s; }

/* ========== 任务输出 ========== */
.result-output {
    display: block;
    white-space: pre-wrap;
    word-break: break-word;
    max-height: 480px;
    overflow-y: auto;
    font-family: 'Courier New', Courier, monospace;
    font-size: 12.5px;
    line-height: 1.75;
    color: var(--text-2);
    padding: 16px;
    background: var(--bg-elevated);
    border-radius: var(--r-md);
    border: 1px solid var(--border);
    margin: 0;
}

.result-output::-webkit-scrollbar { width: 6px; }
.result-output::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }

/* Markdown output pane */
.result-md {
    max-height: 600px;
    overflow-y: auto;
    padding: 16px 20px;
    font-size: 13.5px;
    line-height: 1.75;
    color: var(--text-1);
    word-break: break-word;
}
.result-md::-webkit-scrollbar { width: 6px; }
.result-md::-webkit-scrollbar-thumb { background: var(--border); border-radius: 3px; }
.result-md h1,.result-md h2,.result-md h3,.result-md h4 {
    color: var(--text-1); font-weight: 600; margin: 18px 0 8px;
}
.result-md h1 { font-size: 1.25rem; border-bottom: 1px solid var(--border); padding-bottom: 6px; }
.result-md h2 { font-size: 1.1rem; }
.result-md h3 { font-size: 1rem; color: var(--accent); }
.result-md p { margin: 0 0 10px; }
.result-md ul, .result-md ol { margin: 4px 0 10px 20px; }
.result-md li { margin: 3px 0; }
.result-md strong { font-weight: 700; color: var(--text-1); }
.result-md code {
    font-family: 'Courier New', monospace;
    font-size: 0.88em;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    padding: 1px 5px;
    border-radius: 4px;
    color: var(--accent-2, #f59e0b);
}
.result-md pre {
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--r-md);
    padding: 12px 14px;
    overflow-x: auto;
    margin: 10px 0;
}
.result-md pre code { background: none; border: none; padding: 0; color: var(--text-2); }
.result-md table { border-collapse: collapse; width: 100%; margin: 10px 0; font-size: 0.88em; }
.result-md table th { background: var(--bg-elevated); font-weight: 600; }
.result-md table th, .result-md table td {
    border: 1px solid var(--border);
    padding: 6px 10px;
    text-align: left;
}
.result-md blockquote {
    border-left: 3px solid var(--accent);
    padding: 4px 12px;
    margin: 8px 0;
    color: var(--text-2);
    font-style: italic;
}
.result-md hr { border: none; border-top: 1px solid var(--border); margin: 16px 0; }

/* ========== Reports 标签 ========== */
.report-tabs {
    display: flex;
    flex-wrap: wrap;
    gap: 4px;
    padding: 10px 14px;
    border-bottom: 1px solid var(--border);
    background: var(--bg-elevated);
}
.report-tab {
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.78rem;
    font-weight: 500;
    cursor: pointer;
    border: 1px solid var(--border);
    background: transparent;
    color: var(--text-2);
    transition: all 0.15s;
}
.report-tab:hover { border-color: var(--accent); color: var(--accent); }
.report-tab.active { background: var(--accent); border-color: var(--accent); color: #fff; }

/* ========== 实时干预面板 ========== */
.intervene-history {
    display: flex;
    flex-direction: column;
    gap: 8px;
    margin-bottom: 14px;
    max-height: 180px;
    overflow-y: auto;
}
.intervene-history::-webkit-scrollbar { width: 4px; }
.intervene-history::-webkit-scrollbar-thumb { background: var(--border); border-radius: 2px; }

.intervene-item {
    display: flex;
    align-items: flex-start;
    gap: 10px;
    padding: 8px 12px;
    background: var(--violet-bg);
    border: 1px solid var(--border);
    border-left: 3px solid var(--violet-light);
    border-radius: var(--r-md);
}
.intervene-icon { font-size: 14px; line-height: 1.6; flex-shrink: 0; }
.intervene-body { flex: 1; min-width: 0; }
.intervene-text { font-size: 12.5px; color: var(--text-2); line-height: 1.5; word-break: break-word; }
.intervene-time { font-size: 11px; color: var(--text-4); margin-top: 3px; }

.intervene-composer {
    display: flex;
    gap: 8px;
    align-items: flex-end;
}
.intervene-input {
    flex: 1;
    padding: 8px 12px;
    font-size: 13px;
    font-family: inherit;
    background: var(--bg-elevated);
    border: 1px solid var(--border);
    border-radius: var(--r-md);
    color: var(--text-1);
    resize: vertical;
    min-height: 58px;
    outline: none;
    transition: border-color 0.15s var(--ease);
}
.intervene-input:focus { border-color: var(--violet-light); }
.intervene-input::placeholder { color: var(--text-4); }
.intervene-btn { align-self: flex-end; white-space: nowrap; }

/* ── 静态工作流 SVG 管线 ─────────────────────────── */
.graph-card .card-body .node.running > rect,
.graph-card .card-body .node.running > polygon,
.graph-card .card-body .node.running > path,
.graph-card .card-body .node.running > ellipse {
    filter: drop-shadow(0 0 8px rgba(168, 85, 247, 0.45));
    animation: wfNodePulse 1.25s ease-in-out infinite;
}

.graph-card .card-body .node.done > rect,
.graph-card .card-body .node.done > polygon,
.graph-card .card-body .node.done > path,
.graph-card .card-body .node.done > ellipse {
    transition: fill 0.35s ease, stroke 0.35s ease, opacity 0.35s ease;
}

.graph-card .card-body .node.blocked > rect,
.graph-card .card-body .node.blocked > polygon,
.graph-card .card-body .node.blocked > path,
.graph-card .card-body .node.blocked > ellipse,
.graph-card .card-body .node.pending > rect,
.graph-card .card-body .node.pending > polygon,
.graph-card .card-body .node.pending > path,
.graph-card .card-body .node.pending > ellipse {
    opacity: 0.78;
}

.graph-card .card-body .edgePath path.path.depedge-running {
    stroke-linecap: round;
    animation: wfEdgeFlow 1.2s linear infinite;
}

.graph-card .card-body .edgePath path.path.depedge-blocked {
    opacity: 0.6;
}

@keyframes wfNodePulse {
    0% { stroke-width: 2px; }
    50% { stroke-width: 3px; }
    100% { stroke-width: 2px; }
}

@keyframes wfEdgeFlow {
    from { stroke-dashoffset: 0; }
    to { stroke-dashoffset: -16; }
}

.workflow-svg {
    width: 100%;
    max-width: 560px;
    height: auto;
    display: block;
    margin: auto;
    position: relative;
    z-index: 1;
}
